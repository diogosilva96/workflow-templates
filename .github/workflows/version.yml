on:
  workflow_call:
    outputs:
      version:
        value: ${{ jobs.version.outputs.version }}
    
jobs:
  version:
    runs-on: ubuntu-latest
    outputs:
      semver: ${{ steps.semver.outputs.version }} # needs to be improved (maybe simply use a single semver variable, but use a different format based on branch e.g., main vs dev vs feature branch)
      build-semver: ${{ steps.build-semver.outputs.semver }}
    steps:
      - name: ✅ Checkout
        uses: actions/checkout@v3

      - name: ⚙️ Generate SemVersion
        id: semver
        uses: paulhatch/semantic-version@v5.3.0

      - name: ⚙️ Generate Version
        id: version
        run: |
          if [ ${{ github.ref_name }} == 'main' ]; then
            echo "version=${{ steps.semver.outputs.version }}" >> "$GITHUB_OUTPUT"
          elif [ ${{ github.ref_name }} == 'development]; then
            echo "version=${{ steps.semver.outputs.version }}-${{ github.run_id }}.${{ github.run_attempt }}" >> "$GITHUB_OUTPUT"
          else
            echo "version=${{ steps.semver.outputs.version }}-${{ github.ref_name }}-${{ github.run_id }}.${{ github.run_attempt }}" >> "$GITHUB_OUTPUT"
          fi
          
      - name: print version
        run: echo ${{ jobs.version.outputs.version }}
